# Pull down our base image (the actual linux/windows image our app will run on)
FROM node:22-alpine


#This is the working directory. Then we set where our files will live in the docker container
WORKDIR /usr/src/app


#Then we copy package.json (this is the file that was generated by NODE when we created our project)
# As it contains the names of all the required packages to make our project work.
COPY package*.json ./


#Install those packages, so that our API will work in the container
RUN npm i


#Once all the packages are installed, we then copy across the actual code for our API
COPY . .


#We then allow our docker container to listen on port 3000 and application to communicate with the outside world. Default for vite is (5173)
EXPOSE 5174


#And then we run our API. (Normally will run 'npm run dev' but in dockerfile, it is separated by "", inside the [])
#Tells vite to allow connections from places other than localhost.
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]